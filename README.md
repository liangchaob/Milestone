# Milestone 使用说明

## 概述
- 本工具是一个可直接双击运行的本地单页应用，用于一人公司/小团队的项目里程碑与任务管理。
- 左侧：总进度圆环 + 里程碑列表（支持增删改）。
- 右侧：当前里程碑的任务清单（支持增删改与勾选完成）与进度轴；无任务时隐藏进度与空态框。
- 数据持久化：优先 IndexedDB，自动回退到 localStorage；支持导入/导出 JSON。

## 目标用户与解决的问题
- 目标用户：独立开发者、一人公司、项目经理、小型研发/测试团队、产品/运营同学。
- 解决的问题：
  - 极致轻量、离线、零后端的里程碑与任务可视化，不依赖复杂项目管理平台。
  - 支持快速导入/导出，便于跨设备迁移与汇报协作。
  - 一键以大屏/会议模式展示当前阶段进度与关键任务，适合周会、复盘与走查。
  - 本地数据存储，隐私可控，适合个人与小团队内部使用。

## 快速开始
- 需要本地预先安装 Chrome 浏览器。
- 一键启动（推荐）：在项目根目录双击 `milestone.bat`，会以 Chrome App 模式全屏打开 `index.html`。
  - 脚本使用相对路径，项目文件夹可放在任意位置，无需固定磁盘路径。
- 直接打开：也可双击 `index.html` 在浏览器中运行（非 App 模式）。
- 生成快捷方式并设置图标：
  - 在项目根目录放置 `milestone.ico`（可将 PNG 转 ICO）。
  - 双击运行 `create_shortcut.bat`，会同时在“桌面”和“当前项目根目录”生成 `Milestone.lnk`；图标自动读取根目录的 `milestone.ico`，若不存在则使用系统默认图标。
- 全屏运行：点击左上角“全屏”按钮或使用桌面快捷方式。

## 功能
- 里程碑：新建/编辑/删除；列表支持拖拽排序；状态显示进度百分比与 TODO 总数。
- 任务：新建/编辑/删除/勾选完成；支持描述（可选）；整条拖拽排序；自动换行。
- 导入/导出：
  - 导出为 JSON 文件，包含里程碑与任务（含描述与完成状态）。
  - 导入会清空当前数据并按文件内容重建。

## 数据模型
- 里程碑对象：`{ title: string, desc: string, tasks: Task[] }`
- 任务对象：`{ text: string, desc?: string, done?: boolean }`
- 说明：
  - `desc` 为可选描述；`done` 缺省视为未完成。
  - 应用会为内部存储补充 `id` 与 `order` 字段以持久化排序。

## 导入/导出格式
- 新版结构（包含总目标）：
```json
{
  "meta": { "title": "总目标", "desc": "针对目标的描述..." },
  "milestones": [
    {
      "title": "第一阶段：需求分析",
      "desc": "梳理核心功能点，确定技术栈",
      "dueDate": "",
      "tasks": [
        { "text": "收集用户痛点", "desc": "访谈核心用户，整理痛点池", "done": true },
        { "text": "绘制界面草图" },
        { "text": "确定数据库结构" }
      ]
    },
    {
      "title": "第二阶段：核心开发",
      "desc": "完成主要功能的编码工作",
      "tasks": [
        { "text": "搭建开发环境" },
        { "text": "编写前端页面" },
        { "text": "后端 API 接口开发" },
        { "text": "数据库连接测试" }
      ]
    }
  ]
}
```
- 约束：
  - 顶层为对象，必须包含 `meta` 与 `milestones`；`milestones` 为数组。
  - 里程碑必须包含 `title`、`desc`、`tasks`；`dueDate` 可选。
  - 任务至少包含 `text`；`desc` 与 `done` 可选。
  - 不需要也不识别 `id`、`order` 字段；导入时内部会自动生成。
- 兼容旧版：仍支持“顶层为数组”的旧格式导入（仅里程碑与任务），新版推荐以上结构。

## 面向任意 AI 的生成 Prompt（直接可用）
- 目标：让 AI 输出可被本工具“导入”使用的里程碑与任务 JSON。
- 使用方式：将下列 Prompt 粘贴到任意 AI，得到 JSON 文件后，在应用左上角点击“导入”。

### 通用项目里程碑生成（中文，含总目标）
```
你是项目规划助手。请根据我提供的项目背景与目标，生成可导入的里程碑与任务 JSON。必须严格遵守以下要求：

1) 仅输出 JSON，不包含任何解释或额外文本。
2) 顶层是对象：
   {
     "meta": { "title": string, "desc": string },
     "milestones": Milestone[]
   }
3) 里程碑 Milestone：
   {
     "title": string,
     "desc": string,
     "dueDate": string 可选,
     "tasks": Task[]
   }
4) 任务 Task：
   {
     "text": string,
     "desc": string 可选,
     "done": boolean 可选（默认 false）
   }
5) 里程碑建议 3-6 个；每个里程碑的任务建议 4-8 条；使用中文，内容具体可执行。
6) 不要包含 id、order 等字段；不要输出注释；确保 JSON 可解析。

背景：<在此粘贴你的项目背景与目标>
输出：仅 JSON
```

### 软件研发 Sprint 模式（中文，含总目标）
```
为一个软件项目规划 4 个 Sprint，输出可导入 JSON。严格遵循：
- 顶层对象，包含：
  - meta：总目标与描述
  - milestones：Sprint 数组
- milestones 元素格式：
  {
    "title": "Sprint N：主题",
    "desc": "Sprint 目标与范围",
    "tasks": [ { "text": "任务名", "desc": "任务细节(可选)", "done": false } ... ]
  }
- 每个 Sprint 包含：需求、开发、测试、发布准备等任务；描述可选但建议补充上下文。
- 仅输出 JSON；不得包含额外文字或注释；不要使用 id/order 字段。

项目背景：<补充你的技术栈、平台、交付目标>
输出：仅 JSON
```

### 运营类项目节点（中文）
```
为一个运营/市场项目规划节点，输出可导入 JSON：
- 里程碑示例：目标设定、渠道搭建、内容生产、投放与复盘…
- 任务需具体、可执行、可量化；描述可选但建议填写执行要点。
- 严格遵循数据结构与输出约束，仅输出 JSON。

项目上下文：<填入你的品牌与周期目标>
输出：仅 JSON
```

## 常见问题
- 我能否用英文？可以。只要结构满足要求即可。
- 导入会覆盖当前数据吗？会清空现有里程碑与任务后再导入新内容。
- 描述是可选吗？是；留空也可正常使用。

## 版本与路径参考
- 主要文件：`index.html`（单文件）、`milestone.bat`（App 模式启动脚本，相对路径）、`milestone.ico`（图标）。
- 代码位置提示在说明中已对应增删改查逻辑与样式关键点。

## 启动脚本说明（milestone.bat）
- 脚本会自动检测 Chrome：
  - 优先使用 `%ProgramFiles%\Google\Chrome\Application\chrome.exe` 或 `%ProgramFiles(x86)%\Google\Chrome\Application\chrome.exe`。
  - 若未找到，回退为 `start chrome`（依赖 Chrome 在系统 PATH）。
- 使用相对路径构造 `file:///.../index.html`，不绑定绝对磁盘位置。
- 若系统未安装 Chrome，可用其他浏览器直接打开 `index.html`（体验略有差异，App 模式为 Chrome 专属）。

## 快捷方式脚本
- `create_shortcut.bat`：纯 BAT 脚本，内部调用 WSH 创建 `Milestone.lnk`，目标为 `milestone.bat`，工作目录为项目根；会同时在桌面和当前目录生成快捷方式，并优先使用根目录的 `milestone.ico`。

---
如需进一步约束生成（比如任务模板、估时字段等），可在 Prompt 中添加额外字段，但当前版本的“导入”仅识别本文档定义的字段。你可以在导入后通过应用内编辑补全其他上下文信息。
